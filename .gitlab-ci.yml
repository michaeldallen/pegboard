image: bbassett/openscad

stages: 
  - build

cache:
  paths:
    - cache/

create stl from scad:

  stage: build

  only: 
    refs:
      - main
    changes:
      - "*.scad"
      - Makefile
      - .gitlab-ci.yml

  script:
    - apt-get update
    - apt-get install --assume-yes git-restore-mtime
    - ls -lR | tee /tmp/a
    - /usr/lib/git-core/git-restore-mtime
    - ls -lR | tee /tmp/b
    - diff --side-by-side /tmp/a /tmp/b || true
    - make --version
    - openscad --help
    - pwd
    - ls -lR
    - echo Finny is here
    - date
    - make all
    - date
    - ls -lR
    
  artifacts:
    paths:
      - artifacts
    
    

